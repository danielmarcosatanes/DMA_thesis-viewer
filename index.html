<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DMA Thesis: 3D Molecule Viewer</title>
    <link rel="stylesheet" href="styles.css">
    <script type="text/javascript" src="JSmol.min.js"></script>
</head>
<body>
    <!-- Main Container with Sidebar and Content -->
    <div id="main-container">
      <!-- Mobile Sidebar Toggle Button (outside the sidebar) -->
      <button id="sidebar-toggle" class="mobile-toggle" onclick="toggleSidebar()">☰</button>
        <!-- Sidebar -->
        <div id="sidebar">
            <!-- Sidebar header -->
            <header>
                <h2>DMA Thesis</h2>
                <input type="text" id="sidebar-search" placeholder="Search..." onkeyup="searchMenu()">
          </header>
            <div id="menu">
                <a href="#" id="home-link" onclick="showHome(); setActiveLink('home-link')">Home</a>
                <a href="#" id="structures-link" onclick="toggleStructuresMenu(); setActiveLink('structures-link')">Structures</a>

                <div id="structures-menu" style="display: none;">
                    <a href="#" onclick="showSection('section7.1'); setActiveLink('section7.1')">Structures section 7.1</a>
                    <div id="subsections7.1" class="subsections" style="display: none;">
                        <a href="#" onclick="showSubsection('subsection44aBipyIrBpin'); setActiveLink('subsection44aBipyIrBpin')">44a-Bipy-Ir(Bpin)</a>
                        <a href="#" onclick="showSubsection('subsection44aBipyIrBpin5'); setActiveLink('subsection44aBipyIrBpin5')">44a-Bipy-Ir(Bpin)5</a>
                    </div>
                    <a href="#" onclick="showSection('section7.2'); setActiveLink('section7.2')">Structures section 7.2</a>
                    <div id="subsections7.2" class="subsections" style="display: none;">
                        <a href="#" onclick="showSubsection('subsection44aBipyIrHBPin2'); setActiveLink('subsection44aBipyIrHBPin2')">44a-Bipy-Ir-H-Bpin2</a>
                    </div>
                    <a href="#" onclick="showSection('section7.3'); setActiveLink('section7.3')">Structures section 7.3</a>
                    <div id="subsections7.3" class="subsections" style="display: none;">
                        <a href="#" onclick="showSubsection('subsection44a'); setActiveLink('subsection44a')">44a</a>
                        <a href="#" onclick="showSubsection('subsection45a'); setActiveLink('subsection45a')">45a</a>
                    </div>
                </div>
            </div>

            <!-- Sidebar Footer -->
            <footer>
                2024 DMA Thesis Viewer. All rights reserved.
            </footer>
        </div>

        <!-- Main Content Area -->
        <div id="content">
            <!-- Home Page -->
            <div id="home-page" style="display: block;">
                <h1 id="home-header" style="color: #28528E;">DMA Thesis: 3D Molecule Viewer</h1>
                <p>Welcome to the DMA Thesis 3D Molecule Visualizer. This tool allows you to explore the molecular structures discussed in the thesis. Use the menu to navigate through various sections and visualize the corresponding molecules.</p>
            </div>

            <div id="message" style="display: none;">Select a structure section</div>

            <div id="section7.1" style="display:none;">
                <h2>Structures section 7.1</h2>
                <p>Relevant 3D structures for section 7.1 of the discussion.</p>
            </div>
            <div id="section7.2" style="display:none;">
                <h2>Structures section 7.2</h2>
                <p>Relevant 3D structures for section 7.2 of the discussion.</p>
            </div>
            <div id="section7.3" style="display:none;">
                <h2>Structures section 7.3</h2>
                <p>Relevant 3D structures for section 7.3 of the discussion.</p>
            </div>

            <!-- Subsections for the structures in 7.1 -->
            <div id="subsection44aBipyIrBpin" style="display:none;">
                <h3>44a-Bipy-Ir(Bpin)</h3>
                <div id="jsmolContainer44aBipyIrBpin" class="jsmolContainer"></div>
            </div>

            <div id="subsection44aBipyIrBpin5" style="display:none;">
                <h3>44a-Bipy-Ir(Bpin)5</h3>
                <div id="jsmolContainer44aBipyIrBpin5" class="jsmolContainer"></div>
            </div>

            <!-- Subsections for the structures in 7.2 -->
            <div id="subsection44aBipyIrHBPin2" style="display:none;">
                <h3>44a-Bipy-Ir-H-Bpin2</h3>
                <div id="jsmolContainer44aBipyIrHBPin2" class="jsmolContainer"></div>
            </div>

            <!-- Subsections for the structures in 7.3 -->
            <div id="subsection44a" style="display:none;">
                <h3>44a</h3>
                <div id="jsmolContainer44a" class="jsmolContainer"></div>
            </div>

            <div id="subsection45a" style="display:none;">
                <h3>45a</h3>
                <div id="jsmolContainer45a" class="jsmolContainer"></div>
            </div>
        </div>
    </div>

    <script type="text/javascript">
        var Info = {
            width: 700,
            height: 400,  // Adjust height for better fitting
            j2sPath: "j2s",
            color: "white",
            use: "HTML5",
            disableJ2SLoadMonitor: true,
            disableInitialConsole: true
        };

        function loadJSmol(containerId, moleculeFile) {
            var jsmolApplet = Jmol.getApplet(containerId, Info);
            document.getElementById(containerId).innerHTML = Jmol.getAppletHtml(jsmolApplet);
            Jmol.script(jsmolApplet, "load 'molecules/" + moleculeFile + "';");
        }

        function showHome() {
            // Display home page content and hide other sections
            document.getElementById('home-page').style.display = 'block';
            document.getElementById('message').style.display = 'none';
            document.getElementById('section7.1').style.display = 'none';
            document.getElementById('section7.2').style.display = 'none';
            document.getElementById('section7.3').style.display = 'none';
            document.getElementById('subsection44aBipyIrBpin').style.display = 'none';
            document.getElementById('subsection44aBipyIrBpin5').style.display = 'none';
            document.getElementById('subsection44aBipyIrHBPin2').style.display = 'none';
            document.getElementById('subsection44a').style.display = 'none';
            document.getElementById('subsection45a').style.display = 'none';

            // Ensure the sidebar link is highlighted
            setActiveLink('home-link');
        }

        function toggleStructuresMenu() {
            var menu = document.getElementById('structures-menu');
            if (menu.style.display === 'none' || menu.style.display === '') {
                menu.style.display = 'block';
            } else {
                menu.style.display = 'none';
            }
        }

        function showSection(sectionId) {
            var sections = document.querySelectorAll('#content > div');
            sections.forEach(function(section) {
                section.style.display = 'none';
            });

            var subsections = document.querySelectorAll('.subsections');
            subsections.forEach(function(subsection) {
                subsection.style.display = 'none';
            });

            document.getElementById(sectionId).style.display = 'block';
            document.getElementById('message').style.display = 'none';

            // Show relevant subsections based on the section
            document.getElementById('subsections' + sectionId.split('section')[1]).style.display = 'block';
            setActiveLink(sectionId);
        }

        function showSubsection(subsectionId) {
            var subsections = document.querySelectorAll('#content > div');
            subsections.forEach(function(subsection) {
                subsection.style.display = 'none';
            });

            document.getElementById(subsectionId).style.display = 'block';

            if (subsectionId === 'subsection44aBipyIrBpin') {
                loadJSmol('jsmolContainer44aBipyIrBpin', '44a-Bipy-Ir(Bpin).log');
            }
            if (subsectionId === 'subsection44aBipyIrBpin5') {
                loadJSmol('jsmolContainer44aBipyIrBpin5', '44a-Bipy-Ir(Bpin)5.log');
            }
            if (subsectionId === 'subsection44aBipyIrHBPin2') {
                loadJSmol('jsmolContainer44aBipyIrHBPin2', '44a-Bipy-Ir-H-Bpin2.log');
            }
            if (subsectionId === 'subsection44a') {
                loadJSmol('jsmolContainer44a', '44a.log');
            }
            if (subsectionId === 'subsection45a') {
                loadJSmol('jsmolContainer45a', '45a.log');
            }

            setActiveLink(subsectionId);

            // Collapse sidebar on mobile after selecting a structure
            if (window.innerWidth <= 768) {
              collapseSidebar();
            }
        }

        function setActiveLink(linkId) {
            var links = document.querySelectorAll('#menu a');
            links.forEach(function(link) {
                link.classList.remove('active');
            });

            var activeLink = document.getElementById(linkId);
            if (activeLink) {
                activeLink.classList.add('active');
            }
        }

        function searchMenu() {
            var searchQuery = document.getElementById('sidebar-search').value.toLowerCase();
            var links = document.querySelectorAll('#menu a');
            links.forEach(function(link) {
                if (link.textContent.toLowerCase().indexOf(searchQuery) === -1) {
                    link.style.display = 'none';
                } else {
                    link.style.display = 'block';
                }
            });
        }

        function toggleSidebar() {
          var sidebar = document.getElementById('sidebar');
          var toggleButton = document.getElementById('sidebar-toggle');
          if (sidebar.style.display === 'none' || sidebar.style.display === '') {
              sidebar.style.display = 'block';
              toggleButton.innerText = '✖';  // Show the menu icon
          } else {
              sidebar.style.display = 'none';
              toggleButton.innerText = '☰';  // Show the menu icon
          }
        }
        function collapseSidebar() {
          var sidebar = document.getElementById('sidebar');
              sidebar.style.display = 'none';
          var toggleButton = document.getElementById('sidebar-toggle');
              toggleButton.innerText = '☰';  // Show the menu icon
        }
    </script>
</body>
</html>
