<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DMA Thesis 3D Molecule Viewer</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="sidebar">
        <h1>DMA Thesis</h1>
        <ul>
            <li><a href="javascript:void(0);" onclick="showSubsection('subsection7_1')">7.1 - Molecule Set 1</a></li>
            <li><a href="javascript:void(0);" onclick="showSubsection('subsection7_2')">7.2 - Molecule Set 2</a></li>
            <li><a href="javascript:void(0);" onclick="showSubsection('subsection7_3')">7.3 - Molecule Set 3</a></li>
        </ul>
        <footer style="position: absolute; bottom: 10px; text-align: center; width: 100%; font-size: 0.8em; color: #28528E;">
            2024 DMA Thesis Viewer. All rights reserved.
        </footer>
    </div>

    <div id="main-content">
        <div id="subsection7_1" class="subsection">
            <h3>7.1 - Molecule Set 1</h3>
            <div id="jsmolContainer44aBipyIrHBpin2" class="jsmolContainer">
                <p class="molecule-title">44a-Bipy-Ir-H-Bpin2</p>
            </div>
            <div id="jsmolContainer44aBipyIrBpin" class="jsmolContainer">
                <p class="molecule-title">44a-Bipy-Ir(Bpin)</p>
            </div>
        </div>

        <div id="subsection7_2" class="subsection">
            <h3>7.2 - Molecule Set 2</h3>
            <div id="jsmolContainer44aBipyIrBpin3" class="jsmolContainer">
                <p class="molecule-title">44a-Bipy-Ir(Bpin)3</p>
            </div>
            <div id="jsmolContainer44aBipyIrBpin5" class="jsmolContainer">
                <p class="molecule-title">44a-Bipy-Ir(Bpin)5</p>
            </div>
        </div>

        <div id="subsection7_3" class="subsection">
            <h3>7.3 - Molecule Set 3</h3>
            <div id="jsmolContainer44a" class="jsmolContainer">
                <p class="molecule-title">44a</p>
            </div>
            <div id="jsmolContainer45a" class="jsmolContainer">
                <p class="molecule-title">45a</p>
            </div>
        </div>
    </div>

    <!-- Correct JSmol library path -->
    <script src="https://chemapps.stolaf.edu/jmol/jsmol.js"></script>
    <script>
        // Ensure that the JSmol library is fully loaded before calling any functions
        window.onload = function() {
            console.log("JSmol Library Loaded");
        };

        // Initialize JSmol with debugging output
        function loadJSmol(containerId, moleculeFile) {
            var container = document.getElementById(containerId);
            console.log("Loading JSmol into container: " + containerId);

            if (container) {
                var Info = {
                    width: 500,
                    height: 500,
                    use: "HTML5",
                    j2sPath: "https://chemapps.stolaf.edu/jmol/jsmol/j2s",
                    serverURL: "https://chemapps.stolaf.edu/jmol/jsmol/php/jsmol.php",
                    script: "load 'molecules/" + moleculeFile + "';"
                };
                var jsmolApplet = Jmol.getApplet(containerId, Info);
                container.innerHTML = Jmol.getAppletHtml(jsmolApplet);
                Jmol.script(jsmolApplet, "load 'molecules/" + moleculeFile + "';");
            } else {
                console.error("Container with ID " + containerId + " not found.");
            }
        }

        function showSubsection(subsectionId) {
            var subsections = document.querySelectorAll('.subsection');
            subsections.forEach(function(subsection) {
                subsection.style.display = 'none';
            });

            // Show the selected subsection
            document.getElementById(subsectionId).style.display = 'block';
            console.log("Showing subsection: " + subsectionId);

            // Load molecules in the subsection based on the subsectionId (file name without extension)
            if (subsectionId === 'subsection7_1') {
                loadJSmol('jsmolContainer44aBipyIrHBpin2', '44a-Bipy-Ir-H-Bpin2.log');
                loadJSmol('jsmolContainer44aBipyIrBpin', '44a-Bipy-Ir(Bpin).log');
            } else if (subsectionId === 'subsection7_2') {
                loadJSmol('jsmolContainer44aBipyIrBpin3', '44a-Bipy-Ir(Bpin)3.log');
                loadJSmol('jsmolContainer44aBipyIrBpin5', '44a-Bipy-Ir(Bpin)5.log');
            } else if (subsectionId === 'subsection7_3') {
                loadJSmol('jsmolContainer44a', '44a.log');
                loadJSmol('jsmolContainer45a', '45a.log');
            }
        }
    </script>
</body>
</html>
