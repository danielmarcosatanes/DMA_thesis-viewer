<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>DMA Thesis: 3D Molecule Viewer</title>
    <link rel="stylesheet" href="styles.css">
    <script type="text/javascript" src="JSmol.min.js"></script>
</head>
<body>
    <div id="main-container">
        <!-- Sidebar Toggle Buttons -->
        <button id="sidebar-toggle" class="mobile-toggle" aria-label="Toggle sidebar" onclick="toggleMobileSidebar()">☰</button>
        <button id="collapse-btn" class="collapse-btn" aria-label="Collapse Sidebar" onclick="toggleSidebar()">☰</button>

        <!-- Sidebar -->
        <div id="sidebar">
            <header>
                <h2>DMA Thesis</h2>
                <input type="text" id="sidebar-search" placeholder="Search..." onkeyup="searchMenu()">
            </header>

            <div id="menu">
                <a href="#" id="home-link" onclick="showHome(); setActiveLink('home-link')">Home</a>
                <a href="#" id="structures-link" onclick="toggleStructuresMenu(); setActiveLink('structures-link')">Structures</a>

                <div id="structures-menu" class="sidebar-section" style="display: none;">
                    <a href="#" onclick="showSection('section7.1'); setActiveLink('section7.1')">Structures section 7.1</a>
                    <div id="subsections7.1" class="subsections" style="display: none;">
                        <a href="#" onclick="showSubsection('subsection44aBipyIrBpin'); setActiveLink('subsection44aBipyIrBpin')">44a-Bipy-Ir(Bpin)</a>
                        <a href="#" onclick="showSubsection('subsection44aBipyIrBpin5'); setActiveLink('subsection44aBipyIrBpin5')">44a-Bipy-Ir(Bpin)5</a>
                    </div>
                    <a href="#" onclick="showSection('section7.2'); setActiveLink('section7.2')">Structures section 7.2</a>
                    <div id="subsections7.2" class="subsections" style="display: none;">
                        <a href="#" onclick="showSubsection('subsection44aBipyIrHBPin2'); setActiveLink('subsection44aBipyIrHBPin2')">44a-Bipy-Ir-H-Bpin2</a>
                    </div>
                    <a href="#" onclick="showSection('section7.3'); setActiveLink('section7.3')">Structures section 7.3</a>
                    <div id="subsections7.3" class="subsections" style="display: none;">
                        <a href="#" onclick="showSubsection('subsection44a'); setActiveLink('subsection44a')">44a</a>
                        <a href="#" onclick="showSubsection('subsection45a'); setActiveLink('subsection45a')">45a</a>
                    </div>
                </div>
            </div>

            <footer>2024 DMA Thesis Viewer. All rights reserved.</footer>
        </div>

        <!-- Main Content Area -->
        <div id="content">
            <div id="home-page" style="display: block;">
                <h1 style="color: #28528E;">DMA Thesis: 3D Molecule Viewer</h1>
                <p>Welcome to the DMA Thesis 3D Molecule Visualizer. Use the menu to navigate and visualize molecular structures.</p>
            </div>

            <div id="message" style="display: none;">Select a structure section</div>
            <div id="section7.1" style="display:none;">...</div>
            <div id="section7.2" style="display:none;">...</div>
            <div id="section7.3" style="display:none;">...</div>
            <div id="subsection44aBipyIrBpin" style="display:none;">...</div>
            <div id="subsection44aBipyIrBpin5" style="display:none;">...</div>
            <div id="subsection44aBipyIrHBPin2" style="display:none;">...</div>
            <div id="subsection44a" style="display:none;">...</div>
            <div id="subsection45a" style="display:none;">...</div>
        </div>
    </div>

    <script>
        function toggleSidebar() {
            document.getElementById('sidebar').classList.toggle('collapsed');
        }

        function toggleMobileSidebar() {
            document.getElementById('sidebar').classList.toggle('show');
        }

        function searchMenu() {
            const query = document.getElementById('sidebar-search').value.toLowerCase();
            const links = document.querySelectorAll('#menu a');
            const sections = document.querySelectorAll('.sidebar-section');

            sections.forEach(section => section.style.display = 'none');
            links.forEach(link => {
                if (link.textContent.toLowerCase().includes(query)) {
                    link.style.display = '';
                    const parent = link.closest('.sidebar-section');
                    if (parent) parent.style.display = 'block';
                } else {
                    link.style.display = 'none';
                }
            });
        }

        function setActiveLink(id) {
            const links = document.querySelectorAll('#menu a');
            links.forEach(link => link.classList.remove('active'));
            document.getElementById(id)?.classList.add('active');
        }

        window.addEventListener('resize', resizeJmolForMobile);
        window.addEventListener('load', resizeJmolForMobile);

        function resizeJmolForMobile() {
            const containers = document.querySelectorAll('.jsmolContainer');
            const width = window.innerWidth <= 768 ? '90%' : '700px';
            containers.forEach(container => container.style.width = width);
        }
    </script>
</body>
</html>
